<!-- Author: Vishal Chandra Podishetty G01426953 -->
<!-- Author: Nihal Reddy Cheruku G01455466 -->
<div class="container mt-5">
  <h2>Survey List</h2>
  <table class="table table-bordered table-striped table-responsive">
    <thead class="thead-dark">
      <tr>
        <th>#</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Street Address</th>
        <th>City</th>
        <th>State</th>
        <th>Zip</th>
        <th>Telephone</th>
        <th>Email</th>
        <th>Date of Survey</th>
        <th>Liked Aspects</th>
        <th>Interest Source</th>
        <th>Likelihood to Recommend</th>
        <th>Additional Comments</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let survey of surveys; index as i">
        <td>{{ i + 1 }}</td>
        <td>{{ survey.firstName }}</td>
        <td>{{ survey.lastName }}</td>
        <td>{{ survey.streetAddress }}</td>
        <td>{{ survey.city }}</td>
        <td>{{ survey.state }}</td>
        <td>{{ survey.zip }}</td>
        <td>{{ survey.telephone }}</td>
        <td>{{ survey.email }}</td>
        <td>{{ survey.surveyDate | date: 'MM/dd/yyyy' }}</td>
        <td>{{ survey.likedAspects }}</td>
        <td>{{ survey.interestSource }}</td>
        <td>{{ survey.likelihoodToRecommend }}</td>
        <td>
          <span title="{{ survey.additionalComments }}">
            {{ survey.additionalComments | slice: 0:30 }}{{ survey.additionalComments.length > 30 ? '...' : '' }}
          </span>
        </td>
        <td>
          <button class="btn btn-sm btn-warning" (click)="onEdit(survey)">
            <i class="fa fa-edit"></i> Edit
          </button>
          <button class="btn btn-sm btn-danger" (click)="onDelete(survey.id)">
            <i class="fa fa-trash"></i> Delete
          </button>
        </td>
      </tr>
    </tbody>
  </table>
  <div *ngIf="surveys.length === 0" class="text-center mt-4">
    <p>No surveys available. Please add a survey.</p>
  </div>

  <!-- Edit Modal -->
  <div *ngIf="isEditModalOpen" class="modal" tabindex="-1" role="dialog" style="display: block;">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Edit Survey</h5>
          <button type="button" class="close" (click)="closeEditModal()" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <form>
            <div class="form-group">
              <label for="firstName">First Name</label>
              <input type="text"
                     id="firstName"
                     class="form-control"
                     [(ngModel)]="selectedSurvey.firstName"
                     name="firstName" />
            </div>
            <div class="form-group">
              <label for="lastName">Last Name</label>
              <input type="text"
                     id="lastName"
                     class="form-control"
                     [(ngModel)]="selectedSurvey.lastName"
                     name="lastName" />
            </div>
            <div class="form-group">
              <label for="streetAddress">Street Address</label>
              <input type="text"
                     id="streetAddress"
                     class="form-control"
                     [(ngModel)]="selectedSurvey.streetAddress"
                     name="streetAddress" />
            </div>
            <div class="form-group">
              <label for="city">City</label>
              <input type="text"
                     id="city"
                     class="form-control"
                     [(ngModel)]="selectedSurvey.city"
                     name="city" />
            </div>
            <div class="form-group">
              <label for="state">State</label>
              <input type="text"
                     id="state"
                     class="form-control"
                     [(ngModel)]="selectedSurvey.state"
                     name="state" />
            </div>
            <div class="form-group">
              <label for="zip">Zip</label>
              <input type="text"
                     id="zip"
                     class="form-control"
                     [(ngModel)]="selectedSurvey.zip"
                     name="zip" />
            </div>
            <div class="form-group">
              <label for="telephone">Telephone</label>
              <input type="text"
                     id="telephone"
                     class="form-control"
                     [(ngModel)]="selectedSurvey.telephone"
                     name="telephone" />
            </div>
            <div class="form-group">
              <label for="email">Email</label>
              <input type="email"
                     id="email"
                     class="form-control"
                     [(ngModel)]="selectedSurvey.email"
                     name="email" />
            </div>
            <div class="form-group">
              <label for="additionalComments">Additional Comments</label>
              <textarea id="additionalComments"
                        class="form-control"
                        [(ngModel)]="selectedSurvey.additionalComments"
                        name="additionalComments"></textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" (click)="saveChanges()">Save changes</button>
          <button type="button" class="btn btn-secondary" (click)="closeEditModal()">Close</button>
        </div>
      </div>
    </div>
  </div>
</div>
